<!DOCTYPE html>
<html class="no-js" lang="az">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Knife Store</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.svg" />

    <!-- ========================= CSS here ========================= -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/LineIcons.3.0.css" />
    <link rel="stylesheet" href="assets/css/tiny-slider.css" />
    <link rel="stylesheet" href="assets/css/glightbox.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">

    <style>
        /* Loading animation for products */
        .products-loading {
            text-align: center;
            padding: 50px 0;
            color: #666;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .no-products {
            text-align: center;
            padding: 50px 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
        }

        .no-products h3 {
            color: #666;
            margin-bottom: 15px;
        }

        .no-products p {
            color: #999;
            margin-bottom: 20px;
        }

        .admin-link {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .admin-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
            color: white;
            text-decoration: none;
        }

        .product-fade-in {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        .product-fade-in:nth-child(1) { animation-delay: 0.1s; }
        .product-fade-in:nth-child(2) { animation-delay: 0.2s; }
        .product-fade-in:nth-child(3) { animation-delay: 0.3s; }
        .product-fade-in:nth-child(4) { animation-delay: 0.4s; }
        .product-fade-in:nth-child(5) { animation-delay: 0.5s; }
        .product-fade-in:nth-child(6) { animation-delay: 0.6s; }
        .product-fade-in:nth-child(7) { animation-delay: 0.7s; }
        .product-fade-in:nth-child(8) { animation-delay: 0.8s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .new-product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            z-index: 1;
        }

        .single-product {
            position: relative;
        }

        .admin-panel-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .admin-panel-info a {
            color: #fff;
            text-decoration: underline;
            cursor: pointer;
        }

        .admin-panel-info a:hover {
            color: #f0f0f0;
        }

        .search-results-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }

        .clear-search-btn {
            background: #2196f3;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-search-btn:hover {
            background: #1976d2;
            transform: translateY(-1px);
        }
    </style>
</head>

<body>
    <!--[if lte IE 9]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="https://browsehappy.com/">upgrade your browser</a> to improve
        your experience and security.
      </p>
    <![endif]-->

    <!-- Preloader -->
    <div class="preloader">
        <div class="preloader-inner">
            <div class="preloader-icon">
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <!-- /End Preloader -->

    <!-- Start Header Area -->
    <header class="header navbar-area">
        <!-- Start Header Middle -->
        <div class="header-middle">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-3 col-7">
                        <!-- Start Header Logo -->
                        <a class="navbar-brand" href="index.html">
                            <img src="assets/images/logo/logo.svg" alt="Logo">
                        </a>
                        <!-- End Header Logo -->
                    </div>
                    <div class="col-lg-5 col-md-7 d-xs-none">
                        <!-- Start Main Menu Search -->
                        <div class="main-menu-search">
                            <!-- navbar search start -->
                            <div class="navbar-search search-style-5">
                                <div class="search-select">
                                   <div class="select-position">
                                        <select id="select1">
                                            <option value="">Kateqoriya</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="search-input">
                                    <input type="text" placeholder="Axtar">
                                </div>
                                <div class="search-btn">
                                    <button><i class="lni lni-search-alt"></i></button>
                                </div>
                            </div>
                            <!-- navbar search Ends -->
                        </div>
                        <!-- End Main Menu Search -->
                    </div>
                    <div class="col-lg-4 col-md-2 col-5">
                        <div class="middle-right-area">
                            <div class="nav-hotline">
                                <i class="lni lni-phone"></i>
                                <h3>
                                    <span>+994 51 829 21 71</span>
                                </h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Header Middle -->
        
        <!-- Start Header Bottom -->
        <div class="container">
            <div class="row align-items-center justify-content-between">
                <div class="col-lg-8 col-md-6 col-12 ">
                    <div class="nav-inner">
                        <!-- Start Mega Category Menu -->
                        <div class="mega-category-menu">
                            <span class="cat-button"><i class="lni lni-menu"></i>Kateqoriyalar</span>
                            <ul class="sub-category">
                                <li><a href="product-grids.html">Aşpaz Bıçaqları <i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Bunka</a></li>
                                        <li><a href="product-grids.html">Gyuto</a></li>
                                        <li><a href="product-grids.html">Santokus</a></li>
                                        <li><a href="product-grids.html">Kiritsuke</a></li>
                                    </ul>
                                </li>
                                <li><a href="product-grids.html">Balıq bıçaqları<i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Yanagiba</a></li>
                                        <li><a href="product-grids.html">Deba</a></li>
                                    </ul>
                                </li>
                                <li><a href="product-grids.html">Ət bıçaqları<i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Sujihiki</a></li>
                                        <li><a href="product-grids.html">Garasuki</a></li>
                                        <li><a href="product-grids.html">Boning</a></li>
                                    </ul>
                                </li>
                                <li><a href="product-grids.html">Tərəvəz bıçaqları<i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Usuba</a></li>
                                        <li><a href="product-grids.html">Nakiri</a></li>
                                    </ul>
                                </li>
                                <li><a href="product-grids.html">Kiçik Bıçaqlar<i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Petty</a></li>
                                        <li><a href="product-grids.html">Peeling</a></li>
                                    </ul>
                                </li>
                                <li><a href="product-grids.html">Aşpaz Aksesuarları<i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Dəri çantalar</a></li>
                                        <li><a href="product-grids.html">Parça çantalar</a></li>
                                    </ul>
                                </li>
                                <li><a href="product-grids.html">Mətbəx<i class="lni lni-chevron-right"></i></a>
                                    <ul class="inner-sub-category">
                                        <li><a href="product-grids.html">Avadanlıqlar</a></li>
                                        <li><a href="product-grids.html">Aksesuarlar</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <!-- End Mega Category Menu -->

                        <!-- Start Navbar -->
                        <nav class="navbar navbar-expand-lg">
                            <button class="navbar-toggler mobile-menu-btn" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                                <span class="toggler-icon"></span>
                                <span class="toggler-icon"></span>
                                <span class="toggler-icon"></span>
                            </button>
                            
                            <div class="collapse navbar-collapse sub-menu-bar" id="navbarSupportedContent">
                                <ul class="navbar-nav ms-auto">
                                    <li class="nav-item">
                                        <a class="nav-link" href="index.html">Əsas Səhifə</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="about-us.html">Haqqımızda</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="contact.html">Əlaqə</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="product-grids.html">Məhsullar</a>
                                    </li>
                                </ul>
                                
                                <!-- Mobile Categories Accordion - Only visible on mobile -->
                                <div class="d-lg-none mobile-categories-wrapper">
                                    <div class="accordion" id="mobileCategories">
                                        <div class="accordion-item border-0">
                                            <h2 class="accordion-header" id="categoriesHeading">
                                                <button class="accordion-button collapsed nav-link" type="button" 
                                                        data-bs-toggle="collapse" data-bs-target="#categoriesCollapse" 
                                                        aria-expanded="false" aria-controls="categoriesCollapse">
                                                    <i class="lni lni-menu me-2"></i> Kateqoriyalar
                                                </button>
                                            </h2>
                                            <div id="categoriesCollapse" class="accordion-collapse collapse" 
                                                 aria-labelledby="categoriesHeading" data-bs-parent="#mobileCategories">
                                                <div class="accordion-body p-0">
                                                    <!-- Mobile category items here -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                        <!-- End Navbar -->
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-12">
                    <!-- Start Nav Social -->
                    <div class="nav-social">
                        <h5 class="title">Bizi İzləyin:</h5>
                        <ul>
                            <li>
                                <a href="javascript:void(0)"><i class="lni lni-facebook-filled"></i></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)"><i class="lni lni-twitter-original"></i></a>
                            </li>
                            <li>
                                <a href="https://www.instagram.com/kniife_store/"><i class="lni lni-instagram"></i></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)"><i class="lni lni-skype"></i></a>
                            </li>
                        </ul>
                    </div>
                    <!-- End Nav Social -->
                </div>
            </div>
        </div>
        <!-- End Header Bottom -->
    </header>
    <!-- End Header Area -->

    <!-- Start Hero Area -->
    <section class="hero-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-12 custom-padding-right">
                    <div class="slider-head">
                        <!-- Start Hero Slider -->
                        <div class="hero-slider">
                            <!-- Start Single Slider -->
                            <div class="single-slider"
                                style="background-image: url(assets/images/hero/slider-1.png);">
                                <div class="content">
                                    <h3>TAM KEYFİYYƏTLİ MƏHSULLAR</h3>
                                    <div class="button">
                                        <a href="product-grids.html" class="btn">Sifariş Ver</a>
                                    </div>
                                </div>
                            </div>
                            <!-- End Single Slider -->
                            <!-- Start Single Slider -->
                            <div class="single-slider"
                                style="background-image: url(assets/images/hero/slider-2.png);">
                                <div class="content">
                                    <!-- <h3>Bıcaqlar</h3> -->
                                </div>
                            </div>
                            <!-- End Single Slider -->
                        </div>
                        <!-- End Hero Slider -->
                    </div>
                </div>
                <div class="col-lg-4 col-12">
                    <div class="row">
                        <div class="col-lg-12 col-md-6 col-12 md-custom-padding">
                            <!-- Start Small Banner -->
                            <div class="hero-small-banner"
                                style="background-image: url('assets/images/hero/slider-2.png');">
                                <div class="content">
                                </div>
                            </div>
                            <!-- End Small Banner -->
                        </div>
                        <div class="col-lg-12 col-md-6 col-12">
                            <!-- Start Small Banner -->
                            <div class="hero-small-banner style2">
                                <div class="content">
                                    <h2>Elə indi sifariş ver!</h2>
                                    <p>Çin, Türkiyə, Yaponiya və Almaniyadan birbaşa seçilmiş məhsullarla, hər müştəriyə ustalığa layiq seçim təqdim edirik.</p>
                                    <div class="button">
                                        <a class="btn" href="product-grids.html">Sifariş ver</a>
                                    </div>
                                </div>
                            </div>
                            <!-- Start Small Banner -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- End Hero Area -->

    <!-- Start Trending Product Area -->
    <section class="trending-product section" style="margin-top: 12px;">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title">
                        <h2>Məhsullarımız</h2>
                    </div>
                </div>
            </div>
            
            <!-- Products Loading State -->
            <div id="productsLoading" class="products-loading">
                <div class="loading-spinner"></div>
                <p>Məhsullar yüklənir...</p>
            </div>
            
            <!-- Products Container -->
            <div class="row" id="productsContainer">
                <!-- Products will be dynamically loaded here -->
            </div>

            <!-- No Products State -->
            <div id="noProducts" class="no-products" style="display: none;">
                <h3>🔪 Hələ məhsul əlavə edilməyib</h3>
                <p>Tezliklə yeni məhsullar əlavə ediləcək</p>
            </div>
        </div>
    </section>
    <!-- End Trending Product Area -->

    <!-- Start Shipping Info -->
    <section class="shipping-info">
        <div class="container">
            <ul>
                <!-- Free Shipping -->
                <li>
                    <div class="media-icon">
                        <i class="lni lni-delivery"></i>
                    </div>
                    <div class="media-body">
                        <h5>Çatdırılma</h5>
                    </div>
                </li>
                <!-- Money Return -->
                <li>
                    <div class="media-icon">
                        <i class="lni lni-support"></i>
                    </div>
                    <div class="media-body">
                        <h5>24/7 Xidmət.</h5>
                    </div>
                </li>
                <!-- Support 24/7 -->
                <li>
                    <div class="media-icon">
                        <i class="lni lni-credit-cards"></i>
                    </div>
                    <div class="media-body">
                        <h5>Online ödeniş.</h5>
                    </div>
                </li>
                <!-- Safe Payment -->
                <li>
                    <div class="media-icon">
                        <i class="lni lni-reload"></i>
                    </div>
                    <div class="media-body">
                        <h5>Geri dönüş.</h5>
                    </div>
                </li>
            </ul>
        </div>
    </section>
    <!-- End Shipping Info -->

    <!-- Start Footer Area -->
    <footer class="footer">
        <!-- Start Footer Top -->
        <div class="footer-top">
            <div class="container">
                <div class="inner-content">
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-12">
                            <div class="footer-logo">
                                <a href="index.html">
                                    <img src="assets/images/logo/logo.svg" alt="#">
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-9 col-md-8 col-12">
                            <div class="footer-newsletter">
                                <div class="newsletter-form-head">
                                    <form action="#" method="get" target="_blank" class="newsletter-form">
                                        <input name="EMAIL" placeholder="Yeniliklərə abone olun.." type="email">
                                        <div class="button">
                                            <button class="btn">Abone ol<span class="dir-part"></span></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Footer Top -->
        <!-- Start Footer Middle -->
        <div class="footer-middle">
            <div class="container">
                <div class="bottom-inner">
                    <div class="row">
                        <div class="col-lg-3 col-md-6 col-12">
                            <!-- Single Widget -->
                            <div class="single-footer f-contact">
                                <p class="phone">+994 51 829 21 71</p>
                                <p class="mail">
                                    <a href="mailto:knifestore2024@gmail.com">knifestore2024@gmail.com</a>
                                </p>
                            </div>
                            <!-- End Single Widget -->
                        </div>
                        <div class="col-lg-3 col-md-6 col-12">
                            <!-- End Single Widget -->
                        </div>
                        <div class="col-lg-3 col-md-6 col-12">
                            <!-- Single Widget -->
                            <div class="single-footer f-link">
                                <ul>
                                    <li><a href="javascript:void(0)">Haqqımızda</a></li>
                                    <li><a href="javascript:void(0)">Əlaqə</a></li>
                                </ul>
                            </div>
                            <!-- End Single Widget -->
                        </div>
                        <div class="col-lg-3 col-md-6 col-12">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Footer Middle -->
    </footer>
    <!--/ End Footer Area -->

    <!-- ========================= scroll-top ========================= -->
    <a href="#" class="scroll-top">
        <i class="lni lni-chevron-up"></i>
    </a>

    <!-- ========================= JS here ========================= -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/tiny-slider.js"></script>
    <script src="assets/js/glightbox.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
        // Products management
        const STORAGE_KEY = 'knife_store_products';
        let isSearching = false;
        let lastSearchTerm = '';

        // Open Admin Panel function
        function openAdminPanel() {
            // Create admin.html file and open it
            window.open('admin.html', '_blank');
        }

        // Get products from localStorage
        function getProducts() {
            const stored = localStorage.getItem(STORAGE_KEY);
            return stored ? JSON.parse(stored) : [];
        }

        // Generate star rating HTML
        function generateStars(rating) {
            let starsHtml = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            
            for (let i = 1; i <= 5; i++) {
                if (i <= fullStars) {
                    starsHtml += '<li><i class="lni lni-star-filled"></i></li>';
                } else if (i === fullStars + 1 && hasHalfStar) {
                    starsHtml += '<li><i class="lni lni-star-filled"></i></li>';
                } else {
                    starsHtml += '<li><i class="lni lni-star"></i></li>';
                }
            }
            return starsHtml;
        }

        // Check if product is new (added in last 7 days)
        function isNewProduct(dateAdded) {
            const productDate = new Date(dateAdded);
            const now = new Date();
            const diffTime = Math.abs(now - productDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays <= 7;
        }

        // Create product HTML
        function createProductHTML(product, index) {
            const newBadge = isNewProduct(product.dateAdded) ? '<div class="new-product-badge">Yeni</div>' : '';
            const stockStatus = product.stock > 0 ? '' : '<div class="new-product-badge" style="background: #dc3545;">Tükənib</div>';
            
            return `
                <div class="col-lg-3 col-md-6 col-12 product-fade-in">
                    <!-- Start Single Product -->
                    <div class="single-product" data-product-id="${product.id}">
                        ${newBadge}
                        ${stockStatus}
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}" 
                                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2RkZCIvPgo8dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4='">
                            <div class="button">
                                <a href="javascript:void(0)" class="btn" onclick="viewProduct('${product.id}')">
                                    <i class="lni lni-cart"></i>Ətraflı
                                </a>
                            </div>
                        </div>
                        <div class="product-content">
                            <h3 class="title"><a href="javascript:void(0)">${product.name}</a></h3>
                            <div class="price">
                                <span>${product.price} AZN</span>
                            </div>
                            <div class="review-rating">
                                <h5 class="title">${product.rating}</h5>
                                <ul class="rating">
                                    ${generateStars(product.rating)}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- End Single Product -->
                </div>
            `;
        }

        // View product details
        function viewProduct(productId) {
            const products = getProducts();
            const product = products.find(p => p.id === productId);
            
            if (!product) return;
            
            // Create a better product details modal/alert
            const stockInfo = product.stock > 0 ? `Stok: ${product.stock} ədəd` : 'Stokda yoxdur';
            const productDetails = `
🔪 ${product.name}

💰 Qiymət: ${product.price} AZN
📂 Kateqoriya: ${product.category}${product.subcategory ? `\n📁 Alt kateqoriya: ${product.subcategory}` : ''}
⭐ Reytinq: ${product.rating}/5
📦 ${stockInfo}

${product.description ? `📝 Təsvir:\n${product.description}` : ''}

Sifariş üçün: +994 51 829 21 71
            `.trim();
            
            alert(productDetails);
        }

        // Render products
        function renderProducts(productsToShow = null, searchTerm = '') {
            const products = productsToShow || getProducts();
            const container = document.getElementById('productsContainer');
            const loadingDiv = document.getElementById('productsLoading');
            const noProductsDiv = document.getElementById('noProducts');
            const adminInfoDiv = document.getElementById('adminInfo');
            const searchResultsInfo = document.getElementById('searchResultsInfo');

            // Hide loading
            if (loadingDiv) loadingDiv.style.display = 'none';

            // Handle search results info
            if (searchTerm && productsToShow) {
                isSearching = true;
                lastSearchTerm = searchTerm;
                searchResultsInfo.style.display = 'block';
                document.getElementById('searchResultsCount').textContent = products.length;
                document.getElementById('searchTerm').textContent = searchTerm;
            } else if (!searchTerm) {
                isSearching = false;
                lastSearchTerm = '';
                searchResultsInfo.style.display = 'none';
            }

            if (products.length === 0) {
                if (isSearching) {
                    // Show no search results
                    container.innerHTML = `
                        <div class="col-12">
                            <div class="no-products">
                                <h3>🔍 Axtarış nəticəsi tapılmadı</h3>
                                <p>"${lastSearchTerm}" üçün heç bir məhsul tapılmadı</p>
                                <button class="admin-link" onclick="clearSearch()">Bütün məhsulları göstər</button>
                            </div>
                        </div>
                    `;
                } else {
                    // Show no products message
                    if (noProductsDiv) noProductsDiv.style.display = 'block';
                    if (container) container.innerHTML = '';
                }
                if (adminInfoDiv) adminInfoDiv.style.display = 'block';
                return;
            }

            // Hide no products message and show admin info
            if (noProductsDiv) noProductsDiv.style.display = 'none';
            if (adminInfoDiv) adminInfoDiv.style.display = 'block';

            // Clear container and render products
            if (container) {
                container.innerHTML = '';
                products.forEach((product, index) => {
                    container.innerHTML += createProductHTML(product, index);
                });
            }
        }

        // Search functionality
        function setupMainSearch() {
            const searchInput = document.querySelector('.search-input input');
            const searchBtn = document.querySelector('.search-btn button');
            
            if (searchInput && searchBtn) {
                searchBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    performSearch();
                });
                
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        performSearch();
                    }
                });

                // Real-time search
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase().trim();
                    if (searchTerm === '') {
                        clearSearch();
                    } else if (searchTerm.length >= 2) {
                        performSearch();
                    }
                });
            }
        }

        function performSearch() {
            const searchInput = document.querySelector('.search-input input');
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (!searchTerm) {
                clearSearch();
                return;
            }
            
            const products = getProducts();
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                (product.description && product.description.toLowerCase().includes(searchTerm)) ||
                product.category.toLowerCase().includes(searchTerm) ||
                (product.subcategory && product.subcategory.toLowerCase().includes(searchTerm))
            );
            
            renderProducts(filteredProducts, searchTerm);
        }

        function clearSearch() {
            const searchInput = document.querySelector('.search-input input');
            if (searchInput) searchInput.value = '';
            renderProducts();
        }

        // Auto-refresh products when localStorage changes
        function setupProductAutoRefresh() {
            // Listen for storage changes (when admin panel updates products)
            window.addEventListener('storage', function(e) {
                if (e.key === STORAGE_KEY) {
                    if (!isSearching) {
                        renderProducts();
                    }
                }
            });
            
            // Also check periodically for changes (for same-tab updates)
            let lastProductCount = getProducts().length;
            setInterval(() => {
                const currentProductCount = getProducts().length;
                if (currentProductCount !== lastProductCount) {
                    lastProductCount = currentProductCount;
                    if (!isSearching) {
                        renderProducts();
                    }
                }
            }, 1000);
        }

        // Populate category filter in search
        function populateSearchCategories() {
            const categorySelect = document.getElementById('select1');
            if (!categorySelect) return;

            const products = getProducts();
            const categories = [...new Set(products.map(p => p.category))];
            
            categorySelect.innerHTML = '<option value="">Bütün kateqoriyalar</option>';
            categories.forEach(category => {
                if (category) {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categorySelect.appendChild(option);
                }
            });

            // Add category filter functionality
            categorySelect.addEventListener('change', function() {
                const selectedCategory = this.value;
                const searchInput = document.querySelector('.search-input input');
                const searchTerm = searchInput ? searchInput.value.toLowerCase().trim() : '';
                
                const products = getProducts();
                let filteredProducts = products;

                // Filter by category
                if (selectedCategory) {
                    filteredProducts = filteredProducts.filter(p => p.category === selectedCategory);
                }

                // Filter by search term
                if (searchTerm) {
                    filteredProducts = filteredProducts.filter(product => 
                        product.name.toLowerCase().includes(searchTerm) ||
                        (product.description && product.description.toLowerCase().includes(searchTerm)) ||
                        product.category.toLowerCase().includes(searchTerm) ||
                        (product.subcategory && product.subcategory.toLowerCase().includes(searchTerm))
                    );
                }

                const displaySearchTerm = searchTerm || (selectedCategory ? selectedCategory : '');
                renderProducts(filteredProducts, displaySearchTerm);
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Simulate loading delay
            setTimeout(() => {
                renderProducts();
                setupProductAutoRefresh();
                setupMainSearch();
                populateSearchCategories();
            }, 1000);
        });

        // Refresh products every 5 seconds if admin panel is open
        setInterval(() => {
            if (!isSearching && document.visibilityState === 'visible') {
                const currentProducts = getProducts();
                const displayedProducts = document.querySelectorAll('.single-product').length;
                if (currentProducts.length !== displayedProducts) {
                    renderProducts();
                    populateSearchCategories();
                }
            }
        }, 5000);
    </script>
</body>
</html>
